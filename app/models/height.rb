class Height < ApplicationRecord
  belongs_to :baby

  validates :baby_id, :height, :date, presence: true
  validate :not_zero

  def not_zero
    false
  end

  def self.boy_percentils  #estudio transversal F. Orbegozo 2000 - 2001 ??? (revisar)
    {
      'Percentile 3' => {
        0 => 46.93, 3 => 55.43, 6 => 62.84, 9 => 67.07, 12 => 70.02,
        18 => 76.76, 24 => 81.86, 30 => 86.46, 36 => 90.54, 42 => 91.08,
        48 => 97.02, 54 => 99.96, 60 => 102.88, 66 => 106.05, 72 => 107.87,
        78 => 110.84, 84 => 114.84, 90 => 116.14, 96 => 116.96
      },
      'Percentile 50' => {
        0 => 49.84, 3 => 61.08, 6 => 67.37, 9 => 72.09, 12 => 75.38,
        18 => 82.35, 24 => 88.03, 30 => 91.83, 36 => 96.34, 42 => 99.35,
        48 => 105.29, 54 => 107.47, 60 => 110.86, 66 => 114.75, 72 => 117.05,
        78 => 120.34, 84 => 124.01, 90 => 126.57, 96 => 128.84
      },
      'Percentile 97' => {
        0 => 52.75, 3 => 66.73, 6 => 71.91, 9 => 77.1, 12 => 80.74,
        18 => 87.94, 24 => 94.21, 30 => 97.21, 36 => 102.14, 42 => 107.62,
        48 => 113.55, 54 => 114.98, 60 => 118.84, 66 => 123.44, 72 => 126.24,
        78 => 129.83, 84 => 133.19, 90 => 137.01, 96 => 140.97
      }
    }
  end

  def self.girl_percentils #estudio transversal F. Orbegozo 2000 - 2001 ???  (revisar)
    {
      'Percentile 3' => {
        0 => 45.44, 3 => 55.43, 6 => 61.37, 9 => 65.19, 12 => 68.71,
        18 => 74.87, 24 => 79.96, 30 => 81.90, 36 => 85.98, 42 => 89.51,
        48 => 92.65, 54 => 95.48, 60 => 98.12, 66 => 100.63, 72 => 103.07,
        78 => 105.50, 84 => 107.95, 90 => 110.44, 96 => 112.98
      },
      'Percentile 50' => {
        0 => 49.34, 3 => 59.18, 6 => 65.33, 9 => 69.52, 12 => 73.84,
        18 => 80.05, 24 => 85.40, 30 => 89.87, 36 => 93.93, 42 => 97.73,
        48 => 101.33, 54 => 104.76, 60 => 108.07, 66 => 111.28, 72 => 114.41,
        78 => 117.50, 84 => 120.54, 90 => 123.54, 96 => 126.52
      },
      'Percentile 97' => {
        0 => 53.24, 3 => 62.93, 6 => 69.29, 9 => 73.84, 12 => 78.39,
        18 => 85.22, 24 => 90.84, 30 => 97.85, 36 => 101.89, 42 => 105.96,
        48 => 110.02, 54 => 114.04, 60 => 118.02, 66 => 121.93, 72 => 125.76,
        78 => 129.49, 84 => 133.12, 90 => 136.65, 96 => 140.07
      }
    }
  end

  private

  def age_at_time(time)
    (time - self.dob).to_i / 30
  end
end